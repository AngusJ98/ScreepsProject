{"code":"export class Mission {\r\n    constructor(flag, empire) {\r\n        var _a;\r\n        this.scoutingNeeded = false;\r\n        this.memory = flag.memory;\r\n        this.flag = flag;\r\n        this.name = flag.name + flag.pos.roomName;\r\n        this.empire = empire;\r\n        this.pos = flag.pos;\r\n        this.room = flag.room;\r\n        if (!this.memory.roomName) {\r\n            this.memory.roomName = this.pos.roomName;\r\n        }\r\n        if (this.scoutingNeeded && this.capital) {\r\n            Memory.capitals[this.capital.name].scoutTargets.push(this.pos.roomName);\r\n        }\r\n        this.capital = this.getCapital();\r\n        (_a = this.capital) === null || _a === void 0 ? void 0 : _a.missions.push(this);\r\n    }\r\n    getCapital() {\r\n        if (this.memory.capital) {\r\n            return this.empire.capitals[this.memory.capital];\r\n        }\r\n        else {\r\n            let nearestCapital = this.findClosestCapital();\r\n            this.memory.capital = nearestCapital ? nearestCapital.name : undefined;\r\n            return nearestCapital;\r\n        }\r\n    }\r\n    findClosestCapital() {\r\n        let nearestCapital;\r\n        let minDistance = Infinity;\r\n        for (let name in this.empire.capitals) {\r\n            let capital = this.empire.capitals[name];\r\n            let length = PathFinder.search(this.pos, capital.pos).path.length;\r\n            if (length < minDistance && this.filter(capital)) {\r\n                minDistance = length;\r\n                nearestCapital = capital;\r\n            }\r\n        }\r\n        return nearestCapital;\r\n    }\r\n}\r\n//# sourceMappingURL=Mission.js.map","references":["C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/Empire.ts","C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/Manager.ts","C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/Room/Capital.ts"],"map":"{\"version\":3,\"file\":\"Mission.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/Missions/Mission.ts\"],\"names\":[],\"mappings\":\"AAYA,MAAM,OAAgB,OAAO;IAWzB,YAAY,IAAU,EAAE,MAAc;;QAFtC,mBAAc,GAAY,KAAK,CAAA;QAG3B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAoB,CAAC;QACxC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAA;QAChB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC;QAC1C,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;QACpB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACtB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE;YACvB,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAA;SAC3C;QACD,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,OAAO,EAAE;YACrC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;SAC1E;QACD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;QACjC,MAAA,IAAI,CAAC,OAAO,0CAAE,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE;IACtC,CAAC;IAID,UAAU;QACN,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE;YACrB,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA;SACnD;aAAM;YACH,IAAI,cAAc,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAA;YAC9C,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,cAAc,CAAA,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS,CAAA;YACrE,OAAO,cAAc,CAAA;SACxB;IACL,CAAC;IAED,kBAAkB;QACd,IAAI,cAAmC,CAAC;QAC9C,IAAI,WAAW,GAAG,QAAQ,CAAC;QACrB,KAAK,IAAI,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE;YACnC,IAAI,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAA;YAExC,IAAI,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAA;YACjE,IAAI,MAAM,GAAG,WAAW,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE;gBAC9C,WAAW,GAAG,MAAM,CAAA;gBACpB,cAAc,GAAG,OAAO,CAAA;aAC3B;SAEJ;QACD,OAAO,cAAc,CAAA;IACzB,CAAC;CAIJ\"}"}
