{"code":"import { test3 } from \"Creep/Creep_Actions\";\r\nimport { createMission } from \"Missions/MissionSwitch\";\r\nimport { Capital } from \"Room/Capital\";\r\nimport { test2 } from \"Room/Room_Find\";\r\nimport { test4 } from \"RoomPosition\";\r\nexport class Empire {\r\n    constructor() {\r\n        this.creepsByCapital = this.sortCreeps();\r\n        this.capitals = {}; //filled in by capital constructor\r\n        this.missions = []; //filled in with flags\r\n    }\r\n    sortCreeps() {\r\n        return _.groupBy(Game.creeps, r => r.memory.capital);\r\n    }\r\n    prepareMemory() {\r\n        Memory.username = \"Aozin\";\r\n        Memory.myRooms = Memory.myRooms || [];\r\n        Memory.skippedRooms = []; //Rooms that were skipped due to lack of cpu, not handled yet\r\n        Memory.capitals = Memory.capitals || {};\r\n        this.cleanCreeps(); //Clean up memory of dead creeps\r\n        this.cleanRooms(); //Clean up memory of dead rooms\r\n    }\r\n    cleanRooms() {\r\n        if (Game.time % 300 === 0) {\r\n            for (const name of Object.keys(Memory.rooms)) {\r\n                if (!Memory.rooms[name].lastSeen) {\r\n                    console.log(Game.time, 'Deleting ' + name + ' from memory no `last_seen` value');\r\n                    delete Memory.rooms[name];\r\n                    continue;\r\n                }\r\n                if (Memory.rooms[name].lastSeen < Game.time - 4000) {\r\n                    console.log(Game.time, `Deleting ${name} from memory older than ${4000}`);\r\n                    delete Memory.rooms[name];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    cleanCreeps() {\r\n        for (const name in Memory.creeps) {\r\n            if (Game.creeps[name]) {\r\n                continue;\r\n            }\r\n            else {\r\n                delete Memory.creeps[name];\r\n            }\r\n        }\r\n    }\r\n    build() {\r\n        for (let roomName in Game.rooms) {\r\n            let room = Game.rooms[roomName];\r\n            console.log(room.name);\r\n            if (room.controller && room.controller.my) {\r\n                this.capitals[room.name] = new Capital(room, this);\r\n            }\r\n        }\r\n        for (let flagName in Game.flags) {\r\n            //do something\r\n            let flag = Game.flags[flagName];\r\n            if (flag.room) {\r\n                let mission = createMission(flag, this);\r\n            }\r\n        }\r\n    }\r\n    init() {\r\n        test2();\r\n        test3();\r\n        test4();\r\n        _.forEach(this.capitals, r => r.init());\r\n    }\r\n    run() {\r\n        _.forEach(this.capitals, r => r.run());\r\n    }\r\n}\r\n//# sourceMappingURL=Empire.js.map","references":["C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/Creep/Creep_Actions.ts","C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/Missions/Mission.ts","C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/Missions/MissionSwitch.ts","C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/Room/Capital.ts","C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/Room/Room_Find.ts","C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/RoomPosition.ts"],"map":"{\"version\":3,\"file\":\"Empire.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/Empire.ts\"],\"names\":[],\"mappings\":\"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\"}"}
