{"code":"import { Roles, Setups } from \"Creep_Setups/Setups\";\r\nimport { Manager } from \"Manager\";\r\nimport { ManagerPriority } from \"./ManagerPriority\";\r\nexport class DefenseManager extends Manager {\r\n    constructor(barracks, prio = ManagerPriority.OutpostDefense.outpostDefense) {\r\n        super(barracks, \"DefenseManager_\" + barracks.coreSpawn.id, prio);\r\n        this.guards = this.creepsByRole[Roles.guardMelee];\r\n        this.setup = Setups.guards.armored;\r\n        this.targets = _.flatten(_.map(this.capital.allRooms, r => r.hostiles));\r\n        this.invaderCore = _.flatten(_.map(this.capital.allRooms, r => r.find(FIND_HOSTILE_STRUCTURES, { filter: (s) => s.structureType == STRUCTURE_INVADER_CORE })));\r\n        this.needed = this.targets.length + this.invaderCore.length;\r\n    }\r\n    handleGuard(guard) {\r\n        let target = guard.pos.findClosestByMultiRoomRange(this.targets);\r\n        if (target) {\r\n            guard.goMelee(target);\r\n        }\r\n        else if (this.invaderCore[0]) {\r\n            guard.goMelee(this.invaderCore[0]);\r\n        }\r\n        else {\r\n            let spawn = guard.pos.findClosestByMultiRoomRange(this.capital.spawns);\r\n            if (spawn && guard.pos.getMultiRoomRangeTo(spawn.pos) > 1) {\r\n                guard.travelTo(spawn);\r\n            }\r\n            else if (spawn) {\r\n                spawn.recycleCreep(guard);\r\n            }\r\n            else {\r\n                guard.suicide();\r\n            }\r\n        }\r\n    }\r\n    init() {\r\n        console.log(\"HOSTILES: \", this.needed);\r\n        this.spawnList(this.needed, this.setup);\r\n    }\r\n    run() {\r\n        _.forEach(this.guards, r => this.handleGuard(r));\r\n    }\r\n}\r\n//# sourceMappingURL=DefenseManager.js.map","references":["C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/Buildings/Barracks.ts","C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/Creep_Setups/CreepSetup.ts","C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/Creep_Setups/Setups.ts","C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/Manager.ts","C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/Managers/ManagerPriority.ts"],"map":"{\"version\":3,\"file\":\"DefenseManager.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/Managers/DefenseManager.ts\"],\"names\":[],\"mappings\":\"AAEA,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,qBAAqB,CAAC;AACpD,OAAO,EAAE,OAAO,EAAE,MAAM,SAAS,CAAC;AAClC,OAAO,EAAE,eAAe,EAAE,MAAM,mBAAmB,CAAC;AAEpD,MAAM,OAAO,cAAe,SAAQ,OAAO;IAMvC,YAAY,QAAkB,EAAE,IAAI,GAAG,eAAe,CAAC,cAAc,CAAC,cAAc;QAChF,KAAK,CAAC,QAAQ,EAAE,iBAAiB,GAAG,QAAQ,CAAC,SAAS,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;QACjE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,UAAU,CAAC,CAAA;QACjD,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAA;QAClC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAA;QACvE,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,uBAAuB,EAAE,EAAC,MAAM,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,aAAa,IAAI,sBAAsB,EAAC,CAAC,CAAC,CAA4B,CAAA;QACvL,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAA;IAE/D,CAAC;IAEO,WAAW,CAAC,KAAY;QAC5B,IAAI,MAAM,GAAG,KAAK,CAAC,GAAG,CAAC,2BAA2B,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;QAChE,IAAG,MAAM,EAAE;YACP,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAA;SACxB;aAAM,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE;YAC5B,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAA;SACrC;aAAM;YACH,IAAI,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,2BAA2B,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YACvE,IAAI,KAAK,IAAI,KAAK,CAAC,GAAG,CAAC,mBAAmB,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;gBACvD,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAA;aACxB;iBAAM,IAAI,KAAK,EAAE;gBACd,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,CAAA;aAC5B;iBAAM;gBACH,KAAK,CAAC,OAAO,EAAE,CAAA;aAClB;SAEJ;IACL,CAAC;IAED,IAAI;QACA,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;QACtC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAA;IAC3C,CAAC;IAED,GAAG;QACC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAA;IACpD,CAAC;CACJ\"}"}
