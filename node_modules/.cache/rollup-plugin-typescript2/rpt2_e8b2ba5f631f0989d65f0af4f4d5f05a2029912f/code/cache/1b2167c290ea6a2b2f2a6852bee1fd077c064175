{"code":"import { Roles, Setups } from \"Creep_Setups/Setups\";\r\nimport { Manager } from \"Manager\";\r\nimport { ManagerPriority } from \"./ManagerPriority\";\r\nexport class QueenManager extends Manager {\r\n    constructor(barracks, prio = ManagerPriority.Core.queen) {\r\n        super(barracks, \"QueenManager_\" + barracks.coreSpawn.id, prio);\r\n        this.refillTowersBelow = 500;\r\n        this.barracks = barracks;\r\n        this.queens = this.creepsByRole[Roles.queen];\r\n        this.queenSetup = this.capital.storage ? Setups.queens.default : Setups.queens.early;\r\n    }\r\n    handleQueen(queen) {\r\n        if (queen.store.energy > 0) {\r\n            this.transferActions(queen);\r\n        }\r\n        else {\r\n            this.withdrawActions(queen);\r\n        }\r\n    }\r\n    transferActions(queen) {\r\n        let target = _.first(_.filter(this.barracks.energyStructures, r => r.store.getFreeCapacity() > 0));\r\n        queen.goTransfer(target);\r\n    }\r\n    withdrawActions(queen) {\r\n        let target = queen.pos.findClosestByRange(_.filter(this.capital.room.storageUnits, r => r.store.energy > queen.store.getCapacity() / 4));\r\n        if (target) {\r\n            queen.goWithdraw(target);\r\n        }\r\n    }\r\n    init() {\r\n        let pre = this.barracks.spawns.length <= 1 ? 100 : 50;\r\n        this.spawnList(1, this.queenSetup, { prespawn: pre });\r\n    }\r\n    run() {\r\n        for (let queen of this.queens) {\r\n            this.handleQueen(queen);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=QueenManager.js.map","references":["C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/Buildings/Barracks.ts","C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/Creep_Setups/CreepSetup.ts","C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/Creep_Setups/Setups.ts","C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/Manager.ts","C:/Users/ADMIN BOI/Documents/GitHub/ScreepsProject/src/Managers/ManagerPriority.ts"],"map":"{\"version\":3,\"file\":\"QueenManager.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/Managers/QueenManager.ts\"],\"names\":[],\"mappings\":\"AAEA,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,qBAAqB,CAAC;AACpD,OAAO,EAAE,OAAO,EAAE,MAAM,SAAS,CAAC;AAClC,OAAO,EAAE,eAAe,EAAE,MAAM,mBAAmB,CAAC;AAGpD,MAAM,OAAO,YAAa,SAAQ,OAAO;IAKrC,YAAY,QAAkB,EAAG,IAAI,GAAG,eAAe,CAAC,IAAI,CAAC,KAAK;QAC9D,KAAK,CAAE,QAAQ,EAAE,eAAe,GAAE,QAAQ,CAAC,SAAS,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;QAFnE,sBAAiB,GAAG,GAAG,CAAC;QAGpB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAC7C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC;IACzF,CAAC;IAEO,WAAW,CAAC,KAAY;QAC5B,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;YACxB,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAA;SAC9B;aAAM;YACH,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAA;SAC9B;IAEL,CAAC;IAED,eAAe,CAAC,KAAY;QACxB,IAAI,MAAM,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,eAAe,EAAG,GAAG,CAAC,CAAC,CAAC,CAAA;QACnG,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,CAAA;IAC5B,CAAC;IAED,eAAe,CAAC,KAAY;QACxB,IAAI,MAAM,GAAG,KAAK,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,KAAK,CAAC,WAAW,EAAE,GAAC,CAAC,CAAC,CAAC,CAAC;QACvI,IAAG,MAAM,EAAE;YACP,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,CAAA;SAC3B;IACL,CAAC;IAED,IAAI;QACA,IAAI,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;QACtD,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,EAAE,EAAC,QAAQ,EAAE,GAAG,EAAC,CAAC,CAAA;IACvD,CAAC;IAGD,GAAG;QACC,KAAK,IAAI,KAAK,IAAI,IAAI,CAAC,MAAM,EAAE;YAC3B,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAA;SAC1B;IACL,CAAC;CACJ\"}"}
